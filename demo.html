<iframe 
    id="http-api-test-iframe" 
    frameborder="0" 
    height="600px"
    width="60%" 
    seamless
    onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
></iframe>

<script>
    (function() {
        const conf = {
            baseUrl: "https://demo.simpleauth.link",
            defaultPath: "/apps",
            defaultMethod: "POST",
            defaultBody: '{"name": "test", "redirect_url": "https://localhost:8080/redirect?token=", "session_duration": "3600s", "secret": "test-app-secret"}',
            defaultHeaders: {
                "Content-Type": "application/json",
                "APP_ID": "",
                "APP_SECRET": "",
            }, 
        }
        const base = "index.html?conf=";
        const iframe = document.getElementById('http-api-test-iframe');
        const confString = JSON.stringify(conf);
        const encodedConf = encodeURIComponent(confString);
        iframe.onload = function() {
            this.style.height = this.contentWindow.document.body.scrollHeight + "px";
        }
        iframe.src = base + encodedConf;
        console.log(iframe.src);
        iframe.style.height = iframe.contentWindow.document.scrollHeight + "px";
    })();
</script>